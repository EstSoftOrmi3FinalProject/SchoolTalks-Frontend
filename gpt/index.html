<!DOCTYPE html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>SchoolTalks</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.svg" />
    <!-- Place favicon.ico in the root directory -->

    <!-- Web Font -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

    <!-- ========================= CSS here ========================= -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/css/LineIcons.2.0.css" />
    <link rel="stylesheet" href="/assets/css/animate.css" />
    <link rel="stylesheet" href="/assets/css/tiny-slider.css" />
    <link rel="stylesheet" href="/assets/css/glightbox.min.css" />
    <link rel="stylesheet" href="/assets/css/main.css" />

</head>

<body>
    <!--[if lte IE 9]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="https://browsehappy.com/">upgrade your browser</a> to improve
        your experience and security.
      </p>
    <![endif]-->

    <!-- Preloader -->
    <div class="preloader">
        <div class="preloader-inner">
            <div class="preloader-icon">
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <!-- /End Preloader -->

    <!-- Start Header Area -->
    <header data-include-file="/header.html" class="header navbar-area includeJs"></header>
    <!-- End Header Area -->

    <!-- Start Hero Area -->
    <section class="hero-area" style = "height: 60vh;">

        <section class="hero-area" style="height: 60vh;">
            <div id="chat-container">
                <!-- 채팅이 표시될 영역 -->
            </div>
            <div>
                <!-- 사용자가 입력하는 입력창 -->
                <input type="text" id="chat-input" placeholder="Type your message..." />
                <!-- 채팅 전송 버튼 -->
                <button onclick="sendMessage()">보내기</button>
            </div>
            <div>
                <!-- 이전 채팅 삭제 버튼 -->
                <button onclick="deletePreviousMessages()">이전 채팅 삭제</button>
            </div>
        </section>

    </section>
    <!--/ End Hero Area -->

    <!-- Start About Us Area -->
    <section class="about-us section">
      
    </section>
    <!-- /End About Us Area -->



    <!-- Start Footer Area -->
    <footer class="footer">
        <!-- Start Middle Top -->

        <!--/ End Footer Middle -->
        <!-- Start Footer Bottom -->
        <div class="footer-bottom">
            <div class="container">
                <div class="inner">
                    <div class="row">
                        <div class="col-12">
                            <div class="left">
                                <p>Designed and Developed by<a href="https://graygrids.com/" rel="nofollow"
                                        target="_blank">GrayGrids</a></p>
                                        <p>- School Talks Project -</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Footer Middle -->
    </footer>
    <!--/ End Footer Area -->

    <!-- ========================= scroll-top ========================= -->
    <a href="#" class="scroll-top btn-hover">
        <i class="lni lni-chevron-up"></i>
    </a>

    <!-- ========================= JS here ========================= -->
    <script src="/assets/js/gpt/api.js"></script>
    <script src="/assets/js/gpt/chat.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
    <script src="/assets/js/count-up.min.js"></script>
    <script src="/assets/js/wow.min.js"></script>
    <script src="/assets/js/tiny-slider.js"></script>
    <script src="/assets/js/glightbox.min.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/logout.js"></script>
    <script src="/assets/js/include.js"></script>

    <script type="text/javascript">
        //========= Hero Slider 
        tns({
            container: '.hero-slider',
            items: 1,
            slideBy: 'page',
            autoplay: false,
            mouseDrag: true,
            gutter: 0,
            nav: true,
            controls: false,
            controlsText: ['<i class="lni lni-arrow-left"></i>', '<i class="lni lni-arrow-right"></i>'],
        });
        //====== Clients Logo Slider
        tns({
            container: '.client-logo-carousel',
            slideBy: 'page',
            autoplay: true,
            autoplayButtonOutput: false,
            mouseDrag: true,
            gutter: 15,
            nav: false,
            controls: false,
            responsive: {
                0: {
                    items: 1,
                },
                540: {
                    items: 3,
                },
                768: {
                    items: 4,
                },
                992: {
                    items: 4,
                },
                1170: {
                    items: 6,
                }
            }
        });

            'href': 'https://www.youtube.com/watch?v=r44RKWyfcFw&fbclid=IwAR21beSJORalzmzokxDRcGfkZA1AtRTE__l5N4r09HcGS5Y6vOluyouM9EM',
            'type': 'video',
            'source': 'youtube', //vimeo, youtube or local
            'width': 900,
            'autoplayVideos': true,
        });
    </script>

    <!-- <script>
        // 페이지 로드 시 이전 채팅을 가져와 화면에 표시
        window.onload = function () {
            loadPreviousMessages();
        };
    
        async function loadPreviousMessages() {
            try {
                // 로컬 스토리지에서 토큰 가져오기
                const token = localStorage.getItem('access_token');
    
                // GET 요청을 통해 이전 채팅 메시지 가져오기
                const response = await fetch('http://127.0.0.1:8000/aichat/', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                    },
                });
    
                if (!response.ok) {
                    throw new Error('Failed to load previous messages');
                }
    
                // JSON 응답 데이터에서 이전 채팅 메시지 배열 가져오기
                const previousMessages = await response.json();
    
                // 화면에 이전 채팅 메시지 표시
                var chatContainer = document.getElementById('chat-container');
                chatContainer.innerHTML = ''; // 이전 채팅 삭제
                previousMessages.forEach(message => {
                    chatContainer.innerHTML += `<p>User: ${message.prompt}</p>`;
                    chatContainer.innerHTML += `<p>AI: ${message.response}</p>`;
                });
            } catch (error) {
                console.error(error);
                alert('Failed to load previous messages. Please try again.');
            }
        }
    
        async function sendMessage() {
            try {
                // 로컬 스토리지에서 토큰 가져오기
                const token = localStorage.getItem('access_token');
    
                // 입력된 채팅 가져오기
                const userMessage = document.getElementById('chat-input').value;
    
                // POST 요청으로 새로운 채팅 추가
                const response = await fetch('http://127.0.0.1:8000/aichat/', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prompt: userMessage,
                    }),
                });
    
                if (!response.ok) {
                    throw new Error('Failed to send message');
                }
    
                // 입력창 비우고 이전 채팅 다시 로드
                document.getElementById('chat-input').value = '';
                loadPreviousMessages();
            } catch (error) {
                console.error(error);
                alert('Failed to send message. Please try again.');
            }
        }
    
        async function deletePreviousMessages() {
            try {
                // 로컬 스토리지에서 토큰 가져오기
                const token = localStorage.getItem('access_token');
    
                // DELETE 요청으로 이전 채팅 삭제
                const response = await fetch('http://127.0.0.1:8000/aichat/', {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json',
                    },
                });
    
                if (!response.ok) {
                    throw new Error('Failed to delete previous messages');
                }
    
                // 이전 채팅 삭제 후 화면 갱신
                loadPreviousMessages();
            } catch (error) {
                console.error(error);
                alert('Failed to delete previous messages. Please try again.');
            }
        }
    </script> -->

</body>

</html>